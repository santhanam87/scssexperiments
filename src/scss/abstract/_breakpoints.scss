@use './variables' as *;

@mixin respond-to($breakpoint) {
  $raw-query: map-get($mds_breakpoints, $breakpoint);
  @if $raw-query {
    $query: if(type-of($raw-query)=='string',
        unquote($raw-query),
        inspect($raw-query));

    @media #{$query} {
      @content;
    }
  }

  @else {
    @error 'No value found for `#{$breakpoint}`. '
    +'Please make sure it is defined in `$mds_breakpoints` map.';
  }
}

/* Building respnosive grid. */
@mixin buildGrid {
  /* Common grid container and other styles. */
  .mds-container {
    margin: auto;
  }

  .mds-container-fluid {
    margin: auto;
    width: 100%;
  }

  .mds-row {
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
  }

  .mds-col {
    flex: 1 0 auto;
  }

  .mds-col-auto {
    flex: 0 0 auto;
  }

  [class^="col"] {
    padding: 0 1rem;
  }

  .mds-no-gutters [class^="col"] {
    padding: 0;
  }

  /* Loops to build the columns for basic and 
                          resolution based split up */
  @for $i from 1 through $mds_grid_columns {
    .mds-col-#{$i} {
      flex: 0 0 100% * ($i / $mds_grid_columns);
    }

    .mds-offset-#{$i} {
      margin-left: 100% * ($i / $mds_grid_columns);
    }
  }

  @include respond-to(xsmall) {
    @for $i from 1 through $mds_grid_columns {
      .mds-col-xs-#{$i} {
        flex: 0 0 100% * ($i / $mds_grid_columns);
      }

      .mds-offset-xs-#{$i} {
        margin-left: 100% * ($i / $mds_grid_columns);
      }
    }

    .mds-container {
      max-width: map-get($mds_width, xsmall);
    }
  }

  @include respond-to(small) {
    @for $i from 1 through $mds_grid_columns {
      .mds-col-sm-#{$i} {
        flex: 0 0 100% * ($i / $mds_grid_columns);
      }

      .mds-offset-sm-#{$i} {
        margin-left: 100% * ($i / $mds_grid_columns);
      }
    }

    .mds-container {
      max-width: map-get($mds_width, small);
    }
  }

  @include respond-to(medium) {
    @for $i from 1 through $mds_grid_columns {
      .mds-col-md-#{$i} {
        flex: 0 0 100% * ($i / $mds_grid_columns);
      }

      .mds-offset-md-#{$i} {
        margin-left: 100% * ($i / $mds_grid_columns);
      }
    }

    .mds-container {
      max-width: map-get($mds_width, medium);
    }
  }

  @include respond-to(large) {
    @for $i from 1 through $mds_grid_columns {
      .mds-col-lg-#{$i} {
        flex: 0 0 100% * ($i / $mds_grid_columns);
      }

      .mds-offset-lg-#{$i} {
        margin-left: 100% * ($i / $mds_grid_columns);
      }
    }

    .mds-container {
      max-width: map-get($mds_width, large);
    }
  }
}